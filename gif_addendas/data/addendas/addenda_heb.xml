<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data noupdate="0">
        
        <template id="addenda_heb" name="Adenda Supermercados Internacionales HEB">

            <Complemento
                xmlns:detallista="http://www.sat.gob.mx/detallista" >

                <detallista:detallista
                    t-att-type="no_identify"
                    t-att-contentVersion="no_identify"
                    t-att-documentStructureVersion="no_identify"
                    t-att-documentStatus="no_identify">

                    <detallista:requestForPaymentIdentification>
                        <detallista:entityType>INVOICE</detallista:entityType>
                    </detallista:requestForPaymentIdentification>

                    <detallista:specialInstruction t-att-code="no_identify">
                        <detallista:text t-esc="'('+num2word(record.amount_total, currency_name)+')'" />
                    </detallista:specialInstruction>

                    <detallista:orderIdentification>
                        <detallista:referenceIdentification t-att-type="no_identify" t-out="sale_order_origin" />
                        <detallista:ReferenceDate t-out="init_date" />
                    </detallista:orderIdentification>

                     <detallista:AdditionalInformation>
                        <detallista:referenceIdentification t-att-type="no_identify" t-out="sale_order_origin" />
                    </detallista:AdditionalInformation>

                    <detallista:buyer>
                        <detallista:gln>'No_reconocido'</detallista:gln>
                        <detallista:contactInformation>
                            <detallista:personOrDepartmentName>
                                <detallista:text>'No_reconocido'</detallista:text>
                            </detallista:personOrDepartmentName>
                        </detallista:contactInformation>
                    </detallista:buyer>

                    <detallista:seller>
                        <detallista:gln>'No_reconocido'</detallista:gln>
                        <detallista:alternatePartyIdentification
                            t-att-type="no_identify"
                            t-out="supplier_code" />
                    </detallista:seller>

                    <detallista:shipTo>
                        <detallista:gln>No_recococido</detallista:gln>
                        <detallista:nameAndAddress>
                            <detallista:name t-out="record.partner_shipping_id.name" />
                            <detallista:streetAddressOne t-out="record.partner_shipping_id.street_name" />
                            <detallista:city t-out="record.partner_shipping_id.city" />
                            <detallista:postalCode t-out="record.partner_shipping_id.zip" />
                        </detallista:nameAndAddress>
                    </detallista:shipTo>

                    <detallista:currency t-att-currencyISOCode="currency_name">
                        <detallista:currencyFunction>BILLING_CURRENCY</detallista:currencyFunction>
                        <detallista:rateOfChange>1</detallista:rateOfChange>
                    </detallista:currency>

                    <detallista:paymentTerms
                        t-att-paymentTermsEvent="no_identify"
                        t-att-PaymentTermsRelationTime="no_identify">

                        <detallista:netPayment t-att-netPaymentTermsType="no_identify">
                            <detallista:paymentTimePeriod>
                                <detallista:timePeriodDue t-att-timePeriod="'DAYS'">
                                    <detallista:value t-out="payment_term_days" />
                                </detallista:timePeriodDue>
                            </detallista:paymentTimePeriod>
                        </detallista:netPayment>
                    </detallista:paymentTerms>

                    <detallista:allowanceCharge
                        allowanceChargeType="no_identify"
                        settlementType="no_identify">

                        <detallista:specialServicesType>'No_reconocido'</detallista:specialServicesType>
                        <detallista:monetaryAmountOrPercentage>
                            <detallista:rate base="No_reconcido">
                                <detallista:percentage>'No_reconocido'</detallista:percentage>
                            </detallista:rate>
                        </detallista:monetaryAmountOrPercentage>
                    </detallista:allowanceCharge>

                    <t t-set="index" t-value="0" />
                    <t t-foreach="invoice_line_vals_list" t-as="line_vals">
                        <t t-set="line" t-value="line_vals['line']"/>
                        <t t-set="index" t-value="index + 1"/>

                        <detallista:lineItem
                            t-att-type="'SimpleInvoiceLineItemType'"
                            t-att-number="index">

                            <detallista:tradeItemIdentification>
                                <detallista:gtin t-out="line.product_id.default_code" />
                            </detallista:tradeItemIdentification>
                        
                            <detallista:alternateTradeItemIdentification
                                        t-att-type="no_identify" t-out="line.product_id.default_code" />
                        
                            <detallista:tradeItemDescriptionInformation>
                                <detallista:longText t-out="line.product_id.description_sale"/>
                            </detallista:tradeItemDescriptionInformation>

                            <detallista:invoicedQuantity
                                t-att-unitOfMeasure="line.product_uom_id.unspsc_code_id.code"
                                t-out="line.quantity" />

                            <detallista:aditionalQuantity
                                t-att-QuantityType="NUM_CONSUMER_UNITS">'No_reconocido'</detallista:aditionalQuantity>

                            <detallista:grossPrice>
                                <detallista:Amount  t-out="line.price_unit"/>
                            </detallista:grossPrice>
                        
                            <detallista:netPrice>
                                <detallista:Amount t-out="line.price_unit"/>
                            </detallista:netPrice>

                            <detallista:AdditionalInformation>
                                <detallista:referenceIdentification t-att-type="ON">'No_reconocido'</detallista:referenceIdentification>
                            </detallista:AdditionalInformation>

                            <!-- <detallista:palletInformation>
                                <detallista:palletQuantity>4.00</detallista:palletQuantity>
                                <detallista:description type="EXCHANGE_PALLETS">Tarima</detallista:description>
                                <detallista:transport>
                                    <detallista:methodOfPayment>PREPAID_BY_SELLER</detallista:methodOfPayment>
                                </detallista:transport>
                            </detallista:palletInformation> -->

                            <detallista:allowanceCharge
                                t-att-allowanceChargeType="no_identify"
                                t-att-settlementType="no_identify">
                                
                                <detallista:specialServicesType>'No_reconocido'</detallista:specialServicesType>
                                <detallista:monetaryAmountOrPercentage>
                                    <detallista:percentagePerUnit>'No_reconocido'</detallista:percentagePerUnit>
                                    <detallista:ratePerUnit>
                                        <detallista:amountPerUnit>'No_reconocido'</detallista:amountPerUnit>
                                    </detallista:ratePerUnit>
                                </detallista:monetaryAmountOrPercentage>
                            </detallista:allowanceCharge>

                            <detallista:totalLineAmount>
                                <detallista:grossAmount>
                                    <detallista:Amount t-esc="format_float(line_vals['price_subtotal_before_discount'], currency_precision)"/>
                                </detallista:grossAmount>
                                
                                <detallista:netAmount>
                                    <detallista:Amount t-esc="format_float(line_vals['price_subtotal_before_discount'], currency_precision)"/>
                                </detallista:netAmount>
                            </detallista:totalLineAmount>

                            <detallista:TotalAllowanceCharge
                                t-att-allowanceOrChargeType="no_identify">
                                
                                <detallista:specialServicesType>'No_reconocido'</detallista:specialServicesType>
                                <detallista:Amount>'No_reconocido'</detallista:Amount>
                            </detallista:TotalAllowanceCharge>
                        </detallista:lineItem>
                    </t>


                </detallista:detallista>
            </Complemento>
        </template>

        <record id="addenda_heb" model="ir.ui.view">
            <field name="l10n_mx_edi_addenda_flag">True</field>
        </record>

    </data>
</odoo>